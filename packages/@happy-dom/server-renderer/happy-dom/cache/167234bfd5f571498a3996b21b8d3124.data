"use strict";(self.legacyJsonp=self.legacyJsonp||[]).push([[36794],{116629:function(e,t,r){r.d(t,{D:function(){return l},q:function(){return p}});var n=r(258712),i=r(284987),o=r(857147),a=r(19035);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var c=(0,n.createContext)(!1),s=function(){var e,t,r=(0,i.TH)();return(null==(e=(0,i.k6)().location.state)?void 0:e.isAppFactoryOAuth)||(null!=(t=(0,o.mB)(r.search).next)?t:"").startsWith("/app-factory-oauth/")};function l(e){var t,r=e.children,i=s(),o=function(e){if(Array.isArray(e))return e}(t=(0,n.useState)(i))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,u=[],c=!0,s=!1;try{o=(r=r.call(e)).next,!1;for(;!(c=(n=o.call(r)).done)&&(u.push(n.value),u.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw i}}return u}}(t,2)||function(e,t){if(e){if("string"==typeof e)return u(e,2);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),l=o[0],p=o[1];return(0,n.useEffect)(function(){i&&p(!0)},[i]),(0,a.jsx)(c,{value:l,children:r})}function p(){return(0,n.useContext)(c)}},890841:function(e,t,r){r.d(t,{Z:function(){return K}});var n=r(284987),i=r(619552),o=r(718369),a=r(20256),u=r(640935),c=r(174646),s=r(538645),l=r(19035),p=function(e){var t;return null!=(t=({"ar-SA":"tall","bn-IN":"tall","hi-IN":"tall","te-IN":"tall","ko-KR":"ck","zh-CN":"ck","zh-TW":"ck",ja:"ja","th-TH":"th","vi-VN":"vi"})[e])?t:"default"};function f(e){var t=e.children,r=(0,u.vs)(),n=(0,s.HG)(),i=p((0,c.B)().locale);return(0,l.jsx)(a.Ag,{colorScheme:r&&!n?"dark":"light",children:(0,l.jsx)(a.Ho,{languageMode:i,children:t})})}function d(e){var t=e.children,r=(0,s.ml)();return(0,l.jsx)(a.Q_,{deviceType:r?"mobile":"desktop",children:t})}var m=r(258712);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach(function(t){y(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function y(e,t,r){var n;return(n=function(e,t){if("object"!=v(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=v(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==v(n)?n:n+"")in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b=[];function w(e){var t=e.children,r=(0,c.B)();(0,m.useMemo)(function(){return{web_gestalt_calico:{anyEnabled:!0,group:"enabled"}}},[]);var n=b.reduce(function(e,t){return g(g({},e),{},y({},t,r.experimentsClient.checkExperiment(t)))},{});return(0,l.jsx)(a.II,{value:n,children:t})}var _=r(992114);function x(e){(0,_.nP)("gestalt-component-impression",{tags:{component:e}})}var P=r(94970),k=r(840962),E=r(472856);function T(e){var t,r,n,i,o,u,c,s,p=e.children,f=(t=(0,E.G)().setAppFocusState,r=(0,m.useCallback)(function(){P.Z.pause(),t(!1)},[t]),n=(0,m.useCallback)(function(){P.Z.resume(),t(!0)},[t]),i=(0,m.useMemo)(function(){return{onOpen:r,onClose:n}},[r,n]),o=(0,m.useMemo)(function(){return{onRender:function(){x("RadioGroup")}}},[]),u=(0,m.useMemo)(function(){return{onRender:function(){x("DateField")}}},[]),c=(0,m.useMemo)(function(){return{onRender:function(){x("DatePicker")}}},[]),s=(0,m.useMemo)(function(){return{onRender:function(){x("DateRange")}}},[]),{linkHandlers:(0,m.useMemo)(function(){return{onNavigation:function(e){var t=e.href,r=e.target;return(0,k.Z)({href:t,target:r})}}},[]),sheetMobileHandlers:i,radioGroupHandlers:o,dateFieldHandlers:u,datePickerHandlers:c,dateRangeHandlers:s}),d=f.sheetMobileHandlers,v=f.linkHandlers,h=f.radioGroupHandlers,g=f.datePickerHandlers,y=f.dateFieldHandlers,b=f.dateRangeHandlers;return(0,l.jsx)(a.uu,{dateFieldHandlers:y,datePickerHandlers:g,dateRangeHandlers:b,linkHandlers:v,radioGroupHandlers:h,sheetMobileHandlers:d,children:p})}var D=r(468318),j=r(250281),O=r(116629),I=r(967312),S=r(622460),C=r(535768),A=r(164651),R=r(32747),N=r(849289),Z=r(17433),L=r(638619),B=r(777344),H=r(331118),U=function(){var e;return null!=(e=window.performance)&&e.now?window.performance.now():null},F=function(e){return["/advertiser/"].reduce(function(t,r){return e.includes(r)||t},!1)};function M(e){var t,r=e.children,i=e.immutableLocation,o=e.routerHistoryAction,a=e.staticContext,u=(0,m.useRef)(null),c=(0,m.useRef)(null),s=(0,m.useRef)(i),p=(0,m.useRef)(!0),f=(0,n.$B)(),d=f.path,v=f.params,h=(0,m.useRef)(d),g=(0,m.useRef)(v),y=(0,A.Z)(a.deviceType);if(p.current&&(0,L.ZP)(!0,null==(t=a.serverData)?void 0:t.trace_id),(0,m.useEffect)(function(){h.current=d},[d]),(0,m.useEffect)(function(){g.current=v},[v]),(0,m.useEffect)(function(){(0,B.UQ)(),p.current=!1},[]),F(i.pathname)?s.current.pathname!==i.pathname:s.current!==i){s.current=i,c.current=U();var b=c.current;if(!p.current){var w=!u.current;(0,C.A9)("routeStart",{tags:{action:o}}),(0,H.Eg)(w),(0,B.Ux)(w),(0,B.on)(),(0,Z.tl)(),(0,L._T)(),(0,L.ZP)(!1);var _=(0,H.LH)().defaultBufferSize;b&&((0,C.A9)("routeStart.defaultBufferSize",{count:_}),u.current={time:b,action:o})}}return(0,l.jsx)(N.Z,{value:y?a:null,children:(0,l.jsx)(R.Z,{value:u.current,children:r})})}var z=r(623258),V=r(175770),G=r(116657),W=r(349057);function Q(e){var t=e.children,r=e.immutableLocation,n=e.routerHistoryAction,i=(0,m.useRef)(!0),o=(0,m.useRef)(!1),a=(0,m.useRef)(!1),u=(0,m.useRef)(r),c=performance.now(),s=(0,I.r)().checkExperiment("web_pwt_validate_suspense").group;return s&&(0,_.nP)("pwt_logger_v4_render",{sampleRate:1,tags:{experimentGroup:s}}),o.current=o.current||F(r.pathname)?u.current.pathname!==r.pathname:u.current!==r,o.current&&!a.current&&((0,G.yh)("routeChange"),a.current=!0,(0,z.N0)(),s&&(0,_.nP)("pwt_logger_v4_route_change_reset",{sampleRate:1,tags:{experimentGroup:s}})),(0,m.useLayoutEffect)(function(){if((F(r.pathname)?u.current.pathname!==r.pathname:u.current!==r)||i.current){u.current=r;var e=i.current?0:c;(0,G.ep)(n,e,i.current),(0,W.Nx)("NavigationCompletev4"),i.current=!1,o.current=!1,a.current=!1,s&&(0,_.nP)("pwt_logger_v4_navigation_complete",{sampleRate:1,tags:{experimentGroup:s}})}},[i,n,r,c,o]),t}function $(e){var t=e.children,r=e.immutableLocation,n=e.routerHistoryAction;return(0,V.Z)()?(0,l.jsx)(z.mW,{children:(0,l.jsx)(Q,{immutableLocation:r,routerHistoryAction:n,children:t})}):t}var q=r(751800);function J(e){var t=e.children,r=e.traceLoggerData,i=(0,c.B)(),o=(0,n.k6)(),a=(0,n.TH)(),u=(0,I.r)().checkExperiment("web_pwt_validate_suspense").group,s=(0,S.Z)({requestContext:i,traceLoggerData:r});return(0,C.iF)(o.action),"enabled_switch_v4_v3"===u?(0,l.jsx)($,{immutableLocation:a,routerHistoryAction:o.action,children:(0,l.jsx)(M,{immutableLocation:a,routerHistoryAction:o.action,staticContext:s,children:t})}):(0,l.jsx)(M,{immutableLocation:a,routerHistoryAction:o.action,staticContext:s,children:(0,l.jsx)($,{immutableLocation:a,routerHistoryAction:o.action,children:t})})}function K(e){var t=e.children,r=e.context,n=e.otaData,a=e.inContextTranslation,u=e.requestContext,c=e.resourceCreator,s=e.traceLoggerData,p=(0,I.r)().checkExperiment("web_pwt_validate_suspense").anyEnabled,m=(0,l.jsx)(d,{children:(0,l.jsx)(w,{children:(0,l.jsx)(f,{children:(0,l.jsx)(D.nK,{children:(0,l.jsx)(E.g,{children:(0,l.jsx)(T,{children:(0,l.jsx)(o.Ih,{children:(0,l.jsx)(O.D,{children:(0,l.jsx)(q.UZ,{resourceCreator:c,children:t})})})})})})})})});return(0,l.jsx)(i.E,{value:r,children:p?(0,l.jsx)(J,{traceLoggerData:s,children:(0,l.jsx)(j.Z,{enableInContextTranslation:a,locale:u.locale,otaData:n,children:m})}):(0,l.jsx)(j.Z,{enableInContextTranslation:a,locale:u.locale,otaData:n,children:(0,l.jsx)(J,{traceLoggerData:s,children:m})})})}},754838:function(e,t,r){r.d(t,{Ch:function(){return C},nc:function(){return U},a:function(){return F},ZP:function(){return M},cA:function(){return L},li:function(){return B}});var n,i,o,a=r(9711),u=r(947717),c=r(578373),s=r(203728),l=["element","eventData","component","objectId","view","viewParameter","viewData","durationNs","pairId","clientTrackingParams"],p=r(643063),f=r(718369),d=r(659725),m=r(23084),v=r(693806),h=r(136388),g=r(454800),y=r(992114),b=["object_id_str"],w=["cache_created_time","isImpression"];function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function P(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,i)}function k(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){P(o,n,i,a,u,"next",e)}function u(e){P(o,n,i,a,u,"throw",e)}a(void 0)})}}function E(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return T(e,void 0);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?T(e,t):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach(function(t){O(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function O(e,t,r){var n;return(n=function(e,t){if("object"!=_(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=_(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==_(n)?n:n+"")in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var I=new Set([6945,170,3700]),S=new Set([3700]),C=(O(n={},3829,"articleImpressions"),O(n,18,"pinImpressions"),O(n,3700,"boardImpressions"),O(n,3803,"searchImpressions"),O(n,170,"storyImpression"),O(n,3704,"userImpressions"),n),A=[4700,4701,4702,4703,7042,7043],R=function(e){return(0,d.Z)(JSON.stringify(e))},N=function(e){return I.has(e)};function Z(){var e=new Date;i?i&&i.getUTCDate()!==e.getUTCDate()&&(i=e,(0,s.Z)()):i=e}var L=function(e){var t=e.event_type,r=A.includes(t),n=(0,f.BE)();return!!r||13===t||!!n},B=function(e,t){var r=e.event_type,n=A.includes(r),i=(0,f.BE)();return n?e:13===r&&e.view_type?(null==t||t({viewType:e.view_type,viewParameter:e.view_parameter,viewData:null!=i&&i.viewData?(0,m.Z)(i.viewData,e.view_data):e.view_data}),e):!i||e.view_type&&e.view_parameter?e:j(j({},e),{},{view_type:i.viewType||e.view_type,view_parameter:i.viewParameter,view_data:e.view_data?(0,m.Z)(e.view_data,i.viewData):i.viewData})},H=function(e){var t={};return null!=e&&e.storyPinProductEventData&&(t=j(j({},t),{},{storyPinProductEventData:e.storyPinProductEventData})),t},U=function(e,t){var r,n,i=e.component,o=e.element,a=e.object_id_str,u=e.view_type,c=e.event_type,s=e.appState;return null!=(r=((null==(n=e.event_data)?void 0:n[t])||[]).map(function(r){return j(j(j(j(j(j({auxData:e.aux_data},i?{component:i}:{}),{},{eventData:r},c?{eventType:c}:{}),u?{viewType:u}:{}),{},{viewData:e.view_data,viewParameter:e.view_parameter},a?{objectIdStr:a}:null),{},{impressionType:t},H(e.event_data)),{},{appState:s},o?{element:o}:{})}))?r:[]},F=function(e,t){return j(j(j(j({},e.component?{component:e.component}:{}),e.object_id_str?{objectIdStr:e.object_id_str}:null),e.view_type?{viewType:e.view_type}:{}),{},{eventType:e.event_type,auxData:e.aux_data,impressionType:t,viewData:e.view_data,viewParameter:e.view_parameter,eventData:e.event_data})};function M(){var e=[],t=[],r=0;function n(){return[].concat(E(e),E(t.reduce(function(e,t){var r=e.find(function(e){return e.view_type===t.viewType&&e.view_parameter===t.viewParameter&&e.event_type===t.eventType&&e.object_id_str===t.objectIdStr&&(0,h.Z)(e.view_data,t.viewData)});if(r&&!N(t.eventType))t.impressionType in r.event_data?r.event_data[t.impressionType].push(t.eventData):r.event_data[t.impressionType]=[t.eventData];else{var n,i=t.storyPinProductEventData?{storyPinProductEventData:t.storyPinProductEventData}:{},o={appState:t.appState,aux_data:t.auxData||{},clientUUID:(0,a.Z)(),component:t.component,event_data:j(j({},i),{},O({},t.impressionType,!N(n=t.eventType)||N(n)&&S.has(n)?[t.eventData]:j(j({},t.eventData),(t.eventData||{})[t.impressionType]))),event_type:t.eventType,object_id_str:t.objectIdStr||void 0,time:(0,p.Z)(),view_data:t.viewData,view_parameter:t.viewParameter,view_type:t.viewType,element:t.element};e.push(o)}return e},[])))}function i(e){var t,r,n=e.error,i=e.isError,o=e.isDroppedEvent,a=e.isImpression,c=e.isEventSkipped,s=(0,u.Z)(),l=(null==s?void 0:s.userAgent)||{},p=!(l.isMobile||l.isTablet),f={error_message:null!=(t=null==n?void 0:n.message)?t:"unknown",appType:p?"WEB_DENZEL":"WEB_MOBILE",country:null!=(r=null==s?void 0:s.country)?r:"unknown",browserName:l.browserName,osName:l.osName,browserType:l.browserType,browserVersion:l.browserVersion,isError:i,isImpression:a,isEventSkipped:c};(0,y.nP)("".concat("webapp.metrics.contextLog.indexdb.").concat(o?"dropped":i?"errors":c?"skipped":"success"),{tags:f})}function s(){return f.apply(this,arguments)}function f(){return(f=k(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null==(t=o)?void 0:t.clear();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),i({isError:!0,error:{message:"Error while clearing cache",details:e.t0 instanceof Error?e.t0.message:"Unknown error",stack_trace:e.t0 instanceof Error&&null!=(r=e.t0.stack)?r:"No stack trace available",errorName:e.t0 instanceof Error?e.t0.name:"N/A"}});case 8:case"end":return e.stop()}},e,null,[[0,5]])}))).apply(this,arguments)}function d(){e=[],t=[],r=0}function m(){return(m=k(regeneratorRuntime.mark(function e(t){var r,n,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=j(j({},t),{},{cache_created_time:(0,p.Z)(),isImpression:!1,aux_data:j(j({},t.aux_data),{},{is_context_cached:!0})}),e.next=4,null==(r=o)?void 0:r.setItem((0,a.Z)(),n);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),i({isError:!0,error:{message:"Transaction could not be added",details:e.t0 instanceof Error?e.t0.message:"Unknown error",stack_trace:e.t0 instanceof Error&&null!=(u=e.t0.stack)?u:"No stack trace available",errorName:e.t0 instanceof Error?e.t0.name:"N/A"}});case 9:case"end":return e.stop()}},e,null,[[0,6]])}))).apply(this,arguments)}function _(){return(_=k(regeneratorRuntime.mark(function e(t){var r,n,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=j(j({},t),{},{cache_created_time:(0,p.Z)(),isImpression:!0,auxData:j(j({},t.auxData),{},{is_impression_cached:!0})}),e.next=4,null==(r=o)?void 0:r.setItem((0,a.Z)(),n);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),i({isError:!0,isImpression:!0,error:{message:"Transaction could not be added",details:e.t0 instanceof Error?e.t0.message:"Unknown error",stack_trace:e.t0 instanceof Error&&null!=(u=e.t0.stack)?u:"No stack trace available",errorName:e.t0 instanceof Error?e.t0.name:"N/A"}});case 9:case"end":return e.stop()}},e,null,[[0,6]])}))).apply(this,arguments)}function P(){return T.apply(this,arguments)}function T(){return(T=k(regeneratorRuntime.mark(function e(){var t,r,i,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n(),r=0,i=1e3,t.length){e.next=5;break}return e.abrupt("return");case 5:o=c.Z.create("ApiCResource",{events:t,report_time:(0,p.Z)()}),(a=function(){var e=k(regeneratorRuntime.mark(function e(){var n,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.callCreate({async:!0,showError:!1});case 3:s(),e.next=11;break;case 6:e.prev=6,e.t0=e.catch(0),n=!(null!==e.t0&&void 0!==e.t0&&e.t0.api_error_code)||[v.dO,v.cZ,v.i1].includes(e.t0.api_error_code),function(e){var t,r,n=e.retryAttempts,i=e.error,o=e.events,a=(0,u.Z)(),c=(null==a?void 0:a.userAgent)||{},s=!(c.isMobile||c.isTablet),l={error_code:null!=(t=null==i?void 0:i.api_error_code)?t:"unknown",retryAttempts:n,appType:s?"WEB_DENZEL":"WEB_MOBILE",country:null!=(r=null==a?void 0:a.country)?r:"unknown",browserName:c.browserName,eventSize:o.length,osName:c.osName,browserType:c.browserType,browserVersion:c.browserVersion};(0,y.nP)("metrics_quality_web_retry_error_log",{tags:l})}({retryAttempts:r,error:e.t0,events:t}),n&&r<5?(c=i,r+=1,i*=2,setTimeout(a,c)):s();case 11:case"end":return e.stop()}},e,null,[[0,6]])}));return function(){return e.apply(this,arguments)}}())(),d(),Z();case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function D(){return(D=k(regeneratorRuntime.mark(function r(){var n,a,u,c;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return a=function(e){return(0,p.Z)()-e<6e10},n=function(e){return(0,p.Z)()-e>864e11},r.prev=2,r.next=5,null==(u=o)?void 0:u.getAllItem();case 5:if(r.t0=r.sent,r.t0){r.next=8;break}r.t0=[];case 8:r.t0.forEach(function(r){var o=r.value,u=o.cache_created_time,c=o.isImpression,s=x(o,w);n(u)?i({isDroppedEvent:!0,isError:!1}):a(u)?i({isEventSkipped:!0}):c?(t.push(s),i({isImpression:!0,isError:!1})):(e.push(s),i({isError:!1}))}),r.next=15;break;case 12:r.prev=12,r.t1=r.catch(2),i({isError:!0,error:{message:"Error while syncing cached events",details:r.t1 instanceof Error?r.t1.message:"Unknown error",stack_trace:r.t1 instanceof Error&&null!=(c=r.t1.stack)?c:"No stack trace available",errorName:r.t1 instanceof Error?r.t1.name:"N/A"}});case 15:return r.prev=15,P(),s(),r.finish(15);case 19:case"end":return r.stop()}},r,null,[[2,12,15,19]])}))).apply(this,arguments)}return{flushContextEvents:P,getContextEvents:n,logContextEvent:function(t){var n,i=t.object_id_str,o=x(t,b),u=(0,p.Z)(),c=j(j({aux_data:{},event_data:{},view_data:{}},o),{},{time:u,clientUUID:(0,a.Z)()},i?{object_id_str:i}:null);c.aux_data=(n=c.aux_data)?(n.element,n.eventData,n.component,n.objectId,n.view,n.viewParameter,n.viewData,n.durationNs,n.pairId,n.clientTrackingParams,function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(n,l)):n,r+R(c)>20480&&P(),e.push(c),r+=R(c),Z(),function(e){m.apply(this,arguments)}(c)},logImpression:function(e){r+R(e)>20480&&P(),t.push(e),r+=R(e),function(e){_.apply(this,arguments)}(e)},resetEventsBuffer:d,syncCachedEndEvents:function(){return D.apply(this,arguments)},_getIndexDBInstance:function(){return o},initiateIndexDBCache:function(){var e;null!=(e=window)&&e.indexedDB&&(o=o||new g.Z(window.indexedDB,"ContextLoggingDB","ContextLoggingTable"))}}}},643063:function(e,t,r){r.d(t,{s:function(){return n}});var n=function(){var e,t;return"undefined"!==document.hidden?(e="hidden",t="visibilitychange"):"undefined"!==document.msHidden?(e="msHidden",t="msvisibilitychange"):"undefined"!==document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange"),{hidden:e,visibilityChange:t}};t.Z=function(){return 1e6*Date.now()}},378626:function(e,t,r){r.d(t,{O7:function(){return a},dF:function(){return p},dX:function(){return s},pm:function(){return c},tx:function(){return u}});var n=r(258712),i=r(174646),o=r(538645),a=function(){var e=(0,i.B)().isAuthenticated,t=(0,o.HG)();return(0,n.useMemo)(function(){return{isAuth:!!e,isDesktop:t}},[e,t])},u={" $fragmentSpreads":void 0," $fragmentType":void 0};function c(e){var t=e.isAuthParam,r=e.isDesktop,n=e.authDesktopQuery,i=e.authMobileQuery,o=e.unauthDesktopQuery,a=e.unauthMobileQuery;return t?r?n:i:r?o:a}function s(e){var t=e.isAuthParam,r=e.isDesktop,n=e.authDesktopFragment,i=e.authMobileFragment,o=e.unauthDesktopFragment,a=e.unauthMobileFragment;return t?r?n:i:r?o:a}var l=/(?:^|_)([a-z])/g;function p(e){return e.replace(l,function(e,t){return t.toUpperCase()})}},32747:function(e,t,r){t.Z=(0,r(258712).createContext)(null)},849289:function(e,t,r){t.Z=(0,r(258712).createContext)(null)},454800:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,i)}function o(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function u(e){i(a,n,o,u,c,"next",e)}function c(e){i(a,n,o,u,c,"throw",e)}u(void 0)})}}r.d(t,{Z:function(){return u}});function a(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}var u=function(){var e,t,r,n,i,u,c,s,l;function p(e){var t,r,n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"myDatabase",u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"myStore";if(!(this instanceof p))throw TypeError("Cannot call a class as a function");t="cache",r=new Map,(t=a(t))in this?Object.defineProperty(this,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[t]=r,this.dbName=i,this.storeName=u,this.dbPromise=o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.initializeDB(e);case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",null);case 9:case"end":return t.stop()}},t,null,[[0,6]])}))()}return l=[{key:"initializeDB",value:(e=o(regeneratorRuntime.mark(function e(t){var r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){try{var i=t.open(r.dbName,1);i.onerror=function(){n(Error("IndexedDB initialization error: "+i.error))},i.onupgradeneeded=function(){var e=i.result;e.objectStoreNames.contains(r.storeName)||e.createObjectStore(r.storeName,{keyPath:"key"})},i.onsuccess=function(){e(i.result)}}catch(e){n(Error("IndexedDB initialization error: "+e))}}));case 1:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)})},{key:"reopenDatabaseIfClosed",value:(t=o(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.dbPromise;case 2:if(!((t=e.sent)&&!t.close)){e.next=5;break}return e.abrupt("return",t);case 5:return this.dbPromise=this.initializeDB(window.indexedDB),e.abrupt("return",this.dbPromise);case 7:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"getObjectStore",value:(r=o(regeneratorRuntime.mark(function e(){var t,r,n=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"readwrite",e.next=3,this.reopenDatabaseIfClosed();case 3:if(r=e.sent){e.next=6;break}return e.abrupt("return",null);case 6:return e.abrupt("return",r.transaction(this.storeName,t).objectStore(this.storeName));case 7:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"getItem",value:(n=o(regeneratorRuntime.mark(function e(t){var r,n,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.cache.has(t)){e.next=2;break}return e.abrupt("return",null!=(r=this.cache.get(t))?r:null);case 2:return e.next=4,this.getObjectStore();case 4:if(n=e.sent){e.next=7;break}return e.abrupt("return",null);case 7:return e.abrupt("return",new Promise(function(e,r){var o=n.get(t);o.onerror=function(){return r(o.error)},o.onsuccess=function(){var r,n=(null==(r=o.result)?void 0:r.value)||null;null!==n&&i.cache.set(t,n),e(n)}}));case 8:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"getAllItem",value:(i=o(regeneratorRuntime.mark(function e(){var t,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getObjectStore();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",new Promise(function(e,n){var i=t.getAll();i.onerror=function(){return n(i.error)},i.onsuccess=function(){var t;null==(t=i.result)||t.forEach(function(e){r.cache.set(e.key,e.value)}),e(i.result)}}));case 6:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"setItem",value:(u=o(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.cache.set(t,r),e.next=3,this.getObjectStore();case 3:if(n=e.sent){e.next=6;break}return e.abrupt("return",null);case 6:return e.abrupt("return",new Promise(function(e,i){var o=n.put({key:t,value:r});o.onerror=function(){i(o.error)},o.onsuccess=function(){e(null)}}));case 7:case"end":return e.stop()}},e,this)})),function(e,t){return u.apply(this,arguments)})},{key:"removeItem",value:(c=o(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.cache.delete(t),e.next=3,this.getObjectStore();case 3:if(r=e.sent){e.next=6;break}return e.abrupt("return",null);case 6:return e.abrupt("return",new Promise(function(e,n){var i=r.delete(t);i.onerror=function(){return n(i.error)},i.onsuccess=function(){return e(null)}}));case 7:case"end":return e.stop()}},e,this)})),function(e){return c.apply(this,arguments)})},{key:"clear",value:(s=o(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.cache.clear(),e.next=3,this.getObjectStore();case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",null);case 6:return e.abrupt("return",new Promise(function(e,r){var n=t.clear();n.onerror=function(){return r(n.error)},n.onsuccess=function(){return e(null)}}));case 7:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)})}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}(p.prototype,l),Object.defineProperty(p,"prototype",{writable:!1}),p}()},640607:function(e,t,r){r.d(t,{w:function(){return x}});var n,i=r(947717),o=r(643063),a=r(454800),u=r(726462),c=r(32526),s=r(992114);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,i)}function f(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){p(o,n,i,a,u,"next",e)}function u(e){p(o,n,i,a,u,"throw",e)}a(void 0)})}}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach(function(t){v(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function v(e,t,r){return(t=h(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=l(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}var g=null,y="ACTIVE",b="PAUSED",w=function(){return window&&window.performance&&window.performance.now?"(Time: ".concat((window.performance.now()/1e3).toFixed(3),"s)"):""},_=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}};function x(e){var t,r=e.contextLogger;if(n||(n=null!=(t=window)&&t.indexedDB?new a.Z(window.indexedDB,"EventLoggingDB","TimeSpent"):null),g)return g;var l=new Map,p=(0,c.Z)()&&(0,c.Z)().debug_timespent,d=[],x=p?console:{error:function(){},log:function(){},group:function(){},groupEnd:function(){}};return console.group||(x.group=function(){var e;return(e=console).log.apply(e,arguments)},x.groupEnd=function(){}),g=new(function(){var e;function t(){var e,a,c,h,g=this;if(!(this instanceof t))throw TypeError("Cannot call a class as a function");v(this,"appTimedPair",null),v(this,"clickthroughProperties",null),v(this,"historyStackContext",null),v(this,"offsiteTimedPair",null),v(this,"offsiteTimedPairForegroundId",null),v(this,"pins",Object.freeze({})),v(this,"addEventListeners",function(){var e=(0,o.s)(),t=e.hidden,r=e.visibilityChange;r&&document.addEventListener(r,function(e){document[t]?g.unregisterApp(void 0,e):g.registerApp()},!1),window.addEventListener("focus",g.registerApp),window.addEventListener("blur",function(e){return g.unregisterApp(void 0,e)});var n=_(function(e){return g.unregisterApp(void 0,e)});window.addEventListener("beforeunload",n),window.addEventListener("pagehide",n);var i=navigator&&navigator.userAgent.toLowerCase();i&&i.includes("macintosh")&&i.includes("chrome")&&window.addEventListener("popstate",function(){document.hasFocus()||document[t]||(0,s.nP)("chrome_mac_back_forward_button",{sampleRate:1})})}),v(this,"storeClickthroughProperties",function(e){g.clickthroughProperties&&(0,s.nP)("webapp.metrics.clickthroughs.overwritten",{sampleRate:1,tags:{previousView:g.clickthroughProperties.view_type,previousViewParameter:g.clickthroughProperties.view_parameter,nextView:e.view_type,nextViewParameter:e.view_parameter}}),g.clickthroughProperties=m({time:(0,o.Z)()},e)}),v(this,"clearClickthroughProperties",function(){g.clickthroughProperties=null,g.offsiteTimedPair=null,g.offsiteTimedPairForegroundId=null}),v(this,"registerApp",function(){x.group("App Foreground",w()),null==g.appTimedPair?(g.appTimedPair=new u.Z,g.appTimedPair.start(),g._unpauseAllComponents(),g._endOffsiteTimedPair(),null!==g.appTimedPair&&void 0!==g.appTimedPair&&r.logContextEvent({event_type:4700,pair_id:g.appTimedPair.uuid})):x.error("TimedPair already exists for app."),x.groupEnd()}),v(this,"logIndexDbStatLog",function(e){var t,r,n,o,a,u=e.error,c=e.isError,l=e.isDroppedEvent,p=(0,i.Z)(),f=(null==p?void 0:p.userAgent)||{},d=!(f.isMobile||f.isTablet),m={error_message:null!=(t=null==u?void 0:u.message)?t:"unknown",appType:d?"WEB_DENZEL":"WEB_MOBILE",country:null!=(r=null==p?void 0:p.country)?r:"unknown",browserName:f.browserName,osName:f.osName,browserType:f.browserType,browserVersion:f.browserVersion,isError:c,errorName:null!=(n=null==u?void 0:u.errorName)?n:"unknown",errorDetails:null!=(o=null==u?void 0:u.details)?o:"unknown",errorStackTrace:null!=(a=null==u?void 0:u.stack_trace)?a:"unknown"};(0,s.nP)("".concat("webapp.metrics.timespent.indexdb.").concat(l?"dropped":c?"errors":"success"),{tags:m})}),v(this,"unregisterApp",function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;x.group("App Background",w());var n=g.appTimedPair;if(null!=n){g._pauseAllComponents();var i=n.end();g._startOffsiteTimedPair(),r.logContextEvent({event_type:4701,duration_ns:i,pair_id:n.uuid}),g.appTimedPair=null}else x.error("No TimedPair found for app.");var o=["beforeunload","pagehide"],a=o.includes((null==t?void 0:t.type)||""),u=o.includes((null==t?void 0:t.pauseReason)||"");(a||u)&&g._endOffsiteTimedPair(),e||r.flushContextEvents(),x.groupEnd()}),v(this,"_activateComponent",function(e){x.group("Activating component",w()),p&&x.log(e.getContext());var t=e.getTimedPair();if(t){t.start();var n=e.getLoggerContext(),i=n.view,o=n.viewParameter,a=n.component,u=n.element,c=n.objectId,s=n.clientTrackingParams;r.logContextEvent({event_type:4702,view_type:i,view_parameter:o,component:a,element:u,object_id_str:c,view_data:e.props.viewData,pair_id:t.uuid,clientTrackingParams:s,aux_data:m({time_spent_foreground_pairid:g.appTimedPair&&g.appTimedPair.uuid,time_spent_parent_pairid:e.getParentId()},e.props.auxData)})}x.groupEnd()}),v(this,"_deactivateComponent",function(e){x.group("Deactivating component",w()),p&&x.log(e.getContext());var t=e.getTimedPair();if(t){var n=t.view,i=t.viewParameter,o=t.component,a=t.element,u=t.objectId,c=t.clientTrackingParams,s=t.end();r.logContextEvent({event_type:4703,view_type:n,view_parameter:i,component:o,element:a,object_id_str:u,view_data:e.props.viewData,duration_ns:s,pair_id:t.uuid,clientTrackingParams:c,aux_data:m({time_spent_foreground_pairid:g.appTimedPair&&g.appTimedPair.uuid,time_spent_parent_pairid:e.getParentId()},e.props.auxData)})}x.groupEnd()}),v(this,"_startOffsiteTimedPair",function(){var e,t,n=g.clickthroughProperties;n&&(g.offsiteTimedPair=new u.Z(m(m({},n),{},{view:186,viewParameter:n.view_parameter,objectId:n.object_id_str})),g.offsiteTimedPair.start(),g.offsiteTimedPairForegroundId=g.appTimedPair?g.appTimedPair.uuid:null,n.aux_data=m(m({},n.aux_data),{},{time_to_offsite:void 0!==n.time&&null!==n.time&&"number"==typeof n.time?(0,o.Z)()-n.time:void 0}),r.logContextEvent(m(m({},n),{},{event_type:4702,view_type:186,pair_id:g.offsiteTimedPair?g.offsiteTimedPair.uuid:null,aux_data:m(m({},n.aux_data),{},{time_spent_foreground_pairid:g.offsiteTimedPairForegroundId})})),g._addOffSitePairToIndexDB({offsiteTimedPairUUID:null==(e=g.offsiteTimedPair)?void 0:e.uuid,clickthroughProperties:n,timeCreated:null==(t=g.offsiteTimedPair)?void 0:t.startTime,offsiteTimedPairForegroundId:g.offsiteTimedPairForegroundId}))}),v(this,"_endOffsiteTimedPair",function(){var e=g.offsiteTimedPair,t=g.clickthroughProperties;if(e&&t){var n,i=e.end();r.logContextEvent(m(m({},t),{},{event_type:4703,view_type:186,pair_id:g.offsiteTimedPair?g.offsiteTimedPair.uuid:null,aux_data:m(m({},t.aux_data),{},{time_spent_foreground_pairid:g.offsiteTimedPairForegroundId}),duration_ns:i})),g._removeOffSitePairByIdFromIndexDB(null==(n=g.offsiteTimedPair)?void 0:n.uuid),g._syncCachedTimedPairEndEvents(),g._onOffsiteEnd(),g.clearClickthroughProperties()}else g._syncCachedTimedPairEndEvents()}),v(this,"_addOffSitePairToIndexDB",(e=f(regeneratorRuntime.mark(function e(t){var r,i,o,a,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.offsiteTimedPairUUID,i=t.clickthroughProperties,o=t.timeCreated,a=t.offsiteTimedPairForegroundId,e.prev=1,e.next=4,null==(u=n)?void 0:u.setItem(r,{clickthroughProperties:m({},i),timeCreated:o,offsiteTimedPairForegroundId:a});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),g.logIndexDbStatLog({isError:!0,error:{message:"Transaction could not be added",details:e.t0 instanceof Error?e.t0.message:"Unknown error",stack_trace:e.t0 instanceof Error&&null!=(c=e.t0.stack)?c:"No stack trace available",errorName:e.t0 instanceof Error?e.t0.name:"N/A"}});case 9:case"end":return e.stop()}},e,null,[[1,6]])})),function(t){return e.apply(this,arguments)})),v(this,"_addAppTimerToIndexDB",(a=f(regeneratorRuntime.mark(function e(t){var r,i,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.foregroundAppTimerUUID,i=t.timeCreated,e.prev=1,e.next=4,null==(o=n)?void 0:o.setItem(r,{timeCreated:i});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),g.logIndexDbStatLog({isError:!0,error:{message:"Transaction could not be added",details:e.t0 instanceof Error?e.t0.message:"Unknown error",stack_trace:e.t0 instanceof Error&&null!=(a=e.t0.stack)?a:"No stack trace available",errorName:e.t0 instanceof Error?e.t0.name:"N/A"}});case 9:case"end":return e.stop()}},e,null,[[1,6]])})),function(e){return a.apply(this,arguments)})),v(this,"_removeAppTimerFromIndexDB",(c=f(regeneratorRuntime.mark(function e(t){var r,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.foregroundAppTimerUUID,e.prev=1,r){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,null==(i=n)?void 0:i.removeItem(r);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),g.logIndexDbStatLog({isError:!0,error:{message:"Transaction could not be removed",details:e.t0 instanceof Error?e.t0.message:"Unknown error",stack_trace:e.t0 instanceof Error&&null!=(o=e.t0.stack)?o:"No stack trace available",errorName:e.t0 instanceof Error?e.t0.name:"N/A"}});case 11:case"end":return e.stop()}},e,null,[[1,8]])})),function(e){return c.apply(this,arguments)})),v(this,"_removeOffSitePairByIdFromIndexDB",(h=f(regeneratorRuntime.mark(function e(t){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,null==(r=n)?void 0:r.removeItem(t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),g.logIndexDbStatLog({isError:!0,error:{message:"Transaction could not be removed",details:e.t0 instanceof Error?e.t0.message:"Unknown error",stack_trace:e.t0 instanceof Error&&null!=(i=e.t0.stack)?i:"No stack trace available",errorName:e.t0 instanceof Error?e.t0.name:"N/A"}});case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e){return h.apply(this,arguments)})),v(this,"_syncCachedTimedPairEndEvents",f(regeneratorRuntime.mark(function e(){var t,i,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(e){return(0,u.h)()-e>864e11},e.prev=1,e.next=4,null==(i=n)?void 0:i.getAllItem();case 4:return(e.sent||[]).forEach(function(){var e=f(regeneratorRuntime.mark(function e(n){var i,o,a,c,s,l,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=n.key,a=(o=n.value).clickthroughProperties,c=o.timeCreated,s=o.offsiteTimedPairForegroundId,l=(0,u.h)(),p=c?l-c:null,c&&t(c)?g.logIndexDbStatLog({isDroppedEvent:!0,isError:!1}):(r.logContextEvent(m(m({},a),{},{event_type:4703,view_type:186,pair_id:i||null,aux_data:m(m({},null==a?void 0:a.aux_data),{},{time_spent_foreground_pairid:s,is_timed_pair_cached:!0}),duration_ns:p})),g.logIndexDbStatLog({isError:!1}));case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),e.next=8,null==(o=n)?void 0:o.clear();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),g.logIndexDbStatLog({isError:!0,error:{message:"Error while syncing cached events",details:e.t0 instanceof Error?e.t0.message:"Unknown error",stack_trace:e.t0 instanceof Error&&null!=(a=e.t0.stack)?a:"No stack trace available",errorName:e.t0 instanceof Error?e.t0.name:"N/A"}});case 13:case"end":return e.stop()}},e,null,[[1,10]])}))),v(this,"_onOffsiteEnd",function(){x.group("Trigger onOffsiteEndCallbacks"),d.forEach(function(e){return e({appTimedPair:g.appTimedPair,clickthroughProperties:g.clickthroughProperties,offsiteTimedPair:g.offsiteTimedPair,offsiteTimedPairForegroundId:g.offsiteTimedPairForegroundId})}),x.groupEnd()}),v(this,"_pauseAllComponents",function(){x.group("Pause all components"),l.forEach(function(e,t,r){e===y&&g._deactivateComponent(t),r.set(t,b)}),x.groupEnd()}),v(this,"_unpauseAllComponents",function(){x.group("Unpause all components"),l.forEach(function(e,t){var r=new u.Z(t.getLoggerContext());t.setTimedPair(r,function(){l.set(t,y),g._activateComponent(t)})}),x.groupEnd()})}return e=[{key:"setHistoryStackContext",value:function(e){this.historyStackContext=e}},{key:"setPins",value:function(e){this.pins=e}},{key:"startOffsiteRightClickTimedPair",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._startOffsiteTimedPair(),e||r.flushContextEvents()}},{key:"registerComponent",value:function(e){null===this.appTimedPair?l.set(e,b):(l.set(e,y),this._activateComponent(e))}},{key:"unregisterComponent",value:function(e){l.get(e)===y&&(this._deactivateComponent(e),e.setTimedPair(new u.Z(e.getLoggerContext()))),l.delete(e)}},{key:"size",value:function(){return l.size}},{key:"onOffsiteEnd",value:function(e){d.push(e)}},{key:"removeOnOffsiteEnd",value:function(e){var t=d.indexOf(e);t>-1&&d.splice(t,1)}},{key:"_getIndexDBInstance",value:function(){return n}},{key:"_getContextLogger",value:function(){return r}},{key:"_clearTimeSpentManager",value:function(){g=null}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}())}},859930:function(e,t,r){r.d(t,{Z:function(){return i}});var n=r(600009),i=function(e){var t=e.url,r=(0,n.Z)("/");return 0===t.lastIndexOf(r,0)?t.substr(r.length-1):t}}}]);