"use strict";(self.legacyJsonp=self.legacyJsonp||[]).push([[28672],{328672:function(e,t,n){n.d(t,{Z:function(){return X}});var r=n(258712),i=n(545007),o=n(19963),u=n(578373),s=n(69401),c=[9,3],a=n(754838),l=n(643063),v=n(94970),f=n(900957),d=n(640607),_=n(992114);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){E(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function E(e,t,n){return(t=y(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=h(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==h(t)?t:t+""}var b=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}},g=function(e){switch(e.event_type){case 13:return!!e.view_type&&c.includes(e.view_type);case 4703:if(3===e.view_type&&85===e.component||186===e.view_type||11===e.view_type)return!0;return!1;case 82:case 8948:return!0;default:return!1}},w=null,O=(0,a.ZP)(),S=function(){var e;function t(e){var n=this;if(!(this instanceof t))throw TypeError("Cannot call a class as a function");E(this,"_logTimeoutLong",null),E(this,"_logTimeoutShort",null),E(this,"_clickthroughStartEvent",null),E(this,"_utcDate",new Date),E(this,"_collectionClickthroughEndEvent",null),this._webFastFlushEventsEnabled=e.webFastFlushEventsEnabled,this._rightClickVisibilityChangeEnabled=e.rightClickVisibilityChangeEnabled;var r=function(){var e=document.activeElement;if(e&&e.id===s.ZP.VIDEO_IFRAME_ID&&e)return void setTimeout(function(){return e.blur()},0);v.Z.pause(f.LU),n.flushEvents()},i=b(function(){return r()}),o=function(){v.Z.resume(f.LU)};O&&O.initiateIndexDBCache&&O.initiateIndexDBCache(),window.addEventListener("beforeunload",i),window.addEventListener("pagehide",i),window.addEventListener("focus",o),window.addEventListener("blur",function(){return r()});var u=(0,l.s)(),c=u.hidden,a=u.visibilityChange;a&&window.addEventListener(a,function(){document[c]?r():(n.flushEvents(),o())},!1)}return e=[{key:"setTimeoutToFlushEvents",value:function(e){!this._logTimeoutShort&&(!this._webFastFlushEventsEnabled&&e.view_type&&c.includes(e.view_type)&&13===e.event_type||this._webFastFlushEventsEnabled&&g(e))?this._logTimeoutShort=setTimeout(this.flushEvents.bind(this,!1,!0),300):this._logTimeoutLong||(this._logTimeoutLong=setTimeout(this.flushEvents.bind(this),1e4))}},{key:"addEvent",value:function(e,t){var n=e.event_type;if(null!=n&&(0,a.cA)(e)){this.setTimeoutToFlushEvents(e);var r=(0,a.li)(e,t);r.appState=document&&document.hasFocus()?0:void 0;var i=a.Ch[n];if(i&&1){if(i.startsWith("storyImpression")){null!=(o=r.event_data)&&o.storyImpressions&&(r.event_data.storyImpression=r.event_data.storyImpressions,delete r.event_data.storyImpressions),O.logImpression((0,a.a)(r,"storyImpression"));return}(0,a.nc)(r,i).forEach(O.logImpression);return}if((0,_.nP)("webapp.contextLogger.impressionType",{sampleRate:.01,tags:{event_type:n}}),O.logContextEvent(r),12===n){O.logContextEvent(m(m({},r),{},{event_type:7946})),this._clickthroughStartEvent=m(m({},r),{},{time:1e6*Date.now()}),null==(u=w)||u.storeClickthroughProperties({view_type:r.view_type,view_parameter:r.view_parameter,component:r.component,element:r.element,object_id_str:r.object_id_str,view_data:r.view_data,aux_data:r.aux_data,clientTrackingParams:r.clientTrackingParams});var o,u,s,c=(r||{}).aux_data;!this._rightClickVisibilityChangeEnabled&&c&&"rightClick"===c.clickthrough_type&&(null==(s=w)||s.startOffsiteRightClickTimedPair())}if((7761===n||7762===n)&&(this._collectionClickthroughEndEvent=m(m({},r),{},{event_type:7761===n?7777:7843})),4100===n&&this._collectionClickthroughEndEvent){var l=this._collectionClickthroughEndEvent;this._collectionClickthroughEndEvent=null;var v=m(m({},l),{},{object_id_str:r.object_id_str,duration_ns:r.duration_ns});O.logContextEvent(v)}}}},{key:"flushEvents",value:function(){var e,t=null==(e=O.getContextEvents)?void 0:e.call(O);t&&t.length&&O.flushContextEvents(),this._reset()}},{key:"_reset",value:function(){this._resetShortTimerEvents(),this._resetLongTimerEvents()}},{key:"_resetShortTimerEvents",value:function(){var e;null==(e=O.resetEventsBuffer)||e.call(O),clearTimeout(this._logTimeoutShort),this._logTimeoutShort=null}},{key:"_resetLongTimerEvents",value:function(){var e;null==(e=O.resetEventsBuffer)||e.call(O),clearTimeout(this._logTimeoutLong),this._logTimeoutLong=null}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,y(r.key),r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(),j=n(896798),P=n(414919),C=n(297934),T=n(284987),x=n(685402),k=n(254447),R=n(19035);function I(e){var t=e.children,n=(0,T.TH)(),i=(0,x.b)(),o=(0,r.useMemo)(function(){if(i){var e=new URLSearchParams(n.search);if(!e.get("url")){var t=e.get("tracking_id")||e.get("e_t"),r=e.get("utm_campaign"),o=e.get("utm_source");if(t&&r&&o)return JSON.stringify({message_type:r,tracking_id:t,utm_source:o})}}},[i,n.search]),u=(0,r.useMemo)(function(){return{landingContext:o}},[o]);return(0,R.jsx)(k.T,{value:u,children:t})}var F=n(967312),D=n(174646),L=n(43535),N=n(801393),Z=n(471052),A=n(733668),B=n(390124),U=n(755090);function V(e){var t=e.children,n=(0,o.u)(),r=(0,d.w)({contextLogger:n});return(0,U.Z)(function(){document.hasFocus()&&r.registerApp(),r.addEventListeners()}),(0,R.jsx)(B.$,{value:r,children:t})}var W=n(454310),H=n(890841),M=n(63500),G=n(903683),J=n(945011);function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var $=["children","reduxStore","serverState"];function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach(function(t){var r,i,o;r=e,i=t,o=n[t],(i=function(e){var t=function(e,t){if("object"!=z(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=z(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==z(t)?t:t+""}(i))in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function K(e){var t=e.children,n=(0,J.dM)(),i=Object.keys(n).find(function(e){return void 0!==n[e].login_state}),o=i?n[i]:void 0,u=(0,r.useMemo)(function(){return(0,W.Z)(o)},[o]),s=(0,D.gf)(),c=u.isAuth,a=(0,D.B)().isAuthenticated;return(0,r.useEffect)(function(){a!==c&&s({isAuthenticated:c})},[a,c]),(0,R.jsx)(C.$,{value:u,children:t})}function Q(e){var t=e.children,n=(0,F.r)(),i=(0,G.JC)(),s=(0,r.useRef)(function(e){return i[e]});(0,r.useEffect)(function(){s.current=function(e){return i[e]}},[i]);var c=(0,r.useMemo)(function(){var e,t,r,i,o,c,a,v,f;return i=(e={getReduxPin:function(e){return s.current(e)},webFastFlushEventsEnabled:n.checkExperiment("cli_fast_flush_events").anyEnabled,rightClickVisibilityChangeEnabled:n.checkExperiment("web_metrics_right_click_visibility_change").anyEnabled}).getReduxPin,a=new S({webFastFlushEventsEnabled:void 0!==(o=e.webFastFlushEventsEnabled)&&o,rightClickVisibilityChangeEnabled:void 0!==(c=e.rightClickVisibilityChangeEnabled)&&c}),window.addEventListener&&window.addEventListener("focus",function(){if(a._clickthroughStartEvent){var e=a._clickthroughStartEvent;a._clickthroughStartEvent=null;var t=m(m({},e),{},{event_type:4100,duration_ns:(0,l.Z)()-e.time});a.addEvent(t)}}),null!=(t=O._getIndexDBInstance)&&t.call(O)&&(null==(r=O.syncCachedEndEvents)||r.call(O)),v=function(e){try{var t,n=e?i(e):void 0;return n?"".concat(null!=(t=n.tracking_params)?t:"","~0"):void 0}catch(e){return}},f={flushContextEvents:function(){return a.flushEvents()},logContextEvent:function(e){if(null!==e.event_type&&void 0!==e.event_type){var t=e.clientTrackingParams||v(e.object_id_str);a.addEvent(m(m({},e),{},{clientTrackingParams:t}),f.injectSetViewContextDataFromHook)}},logImpression:function(e){var t=e.auxData,n=e.component,r=e.eventData,i=e.eventType,o=e.impressionType,u=e.objectIdStr,s=e.viewData,c=e.viewParameter,l=e.viewType,v=e.element;null!=i&&a.addEvent({event_type:i,event_data:E({},o,r),component:n,object_id_str:u,aux_data:t,view_type:l,view_parameter:c,view_data:s,element:v},f.injectSetViewContextDataFromHook)}},w=(0,d.w)({contextLogger:f}),u.Z.contextLogger=f,f},[n]);return(0,R.jsx)(o.B,{value:c,children:t})}function X(e){var t=e.children,n=e.reduxStore,o=(e.serverState,function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&({}).propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,$)),s=(0,r.useRef)(!1),c=(0,r.useMemo)(function(){return new A.ZP},[]);if(!s.current){if(window){var a={},l=function(e,t){var n=decodeURIComponent(t),r=new Promise(function(t){a[e]||(a[e]={}),a[e][n]=t});c.add(e,n,r)},v=function(e){var t,r,i=(0,Z.Z)(e),o=i.normalizedResponse,s=i.options,c=i.resource,l=i.response,v=i.schema;l.resource_response.error?408!==l.resource_response.error.http_status&&n.dispatch((0,N.Tl)(c,s,l.resource_response.error)):(u.Z.fetchCompleteCallback&&u.Z.fetchCompleteCallback({resource:c,options:s,response:l,normalizedResponse:o,refresh:!1,resourceSchema:v}),n.dispatch((0,N.Sr)(c,s,l,o,!1,v))),null==(t=a[c])||null==(r=t[(0,L.Z)(s)])||r.call(t)};window.__PWS_RESOURCE_PENDING_FETCH_HANDLER__=l,window.__PWS_RESOURCE_SSR_HANDLER__=v;var f=Object.keys(window.__PWS_RESOURCE_PENDING_BEFORE_INIT__);f.length&&(f.forEach(function(e){window.__PWS_RESOURCE_PENDING_BEFORE_INIT__[e].forEach(function(t){l(e,t)})}),window.__PWS_RESOURCE_PENDING_BEFORE_INIT__={}),window.__PWS_RESOURCE_DATA_BEFORE_INIT__.length&&(window.__PWS_RESOURCE_DATA_BEFORE_INIT__.forEach(v),window.__PWS_RESOURCE_DATA_BEFORE_INIT__=[])}s.current=!0}return(0,R.jsx)(H.Z,q(q({},o),{},{children:(0,R.jsx)(A.F_,{value:c,children:(0,R.jsx)(i.zt,{store:n,children:(0,R.jsx)(M.fJ,{children:(0,R.jsx)(G._S,{children:(0,R.jsx)(J.kY,{children:(0,R.jsx)(K,{children:(0,R.jsx)(Q,{children:(0,R.jsx)(j.FH,{children:(0,R.jsx)(I,{children:(0,R.jsx)(V,{children:(0,R.jsx)(P.GF,{children:t})})})})})})})})})})})}))}},254447:function(e,t,n){n.d(t,{T:function(){return i}});var r=(0,n(218291).Z)("NotificationContext"),i=r.Provider;t.Z=r.get}}]);